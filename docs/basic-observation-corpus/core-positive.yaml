{
  "cases": [
    {
      "id": "new-clears-program",
      "profile": "public-observed-v1",
      "commands": ["NEW", "LIST"],
      "lines": ["10 LET A=9", "NEW", "LIST", "PRINT A"],
      "expect": {
        "outputContains": ["OK", "0"],
        "outputNotContains": ["10 LET A=9"]
      }
    },
    {
      "id": "list-prints-lines",
      "profile": "public-observed-v1",
      "commands": ["LIST"],
      "lines": ["10 PRINT 1", "LIST"],
      "expect": {
        "outputContains": ["10 PRINT 1"]
      }
    },
    {
      "id": "run-simple-program",
      "profile": "public-observed-v1",
      "commands": ["RUN", "LET", "PRINT"],
      "lines": ["10 LET A=41", "20 PRINT A+1", "RUN"],
      "expect": {
        "outputContains": ["42", "OK"],
        "variables": {"A": 41}
      }
    },
    {
      "id": "print-expression",
      "profile": "public-observed-v1",
      "commands": ["PRINT"],
      "lines": ["LET A=2+3*4", "PRINT A,1+1"],
      "expect": {
        "outputContains": ["14      2"]
      }
    },
    {
      "id": "let-assignment",
      "profile": "public-observed-v1",
      "commands": ["LET"],
      "lines": ["LET Z9=(2+3)*4", "PRINT Z9"],
      "expect": {
        "outputContains": ["20"],
        "variables": {"Z9": 20}
      }
    },
    {
      "id": "input-immediate",
      "profile": "public-observed-v1",
      "commands": ["INPUT", "PRINT"],
      "lines": ["INPUT A", "99", "PRINT A"],
      "expect": {
        "outputContains": ["? ", "99"],
        "variables": {"A": 99}
      }
    },
    {
      "id": "goto-jump",
      "profile": "public-observed-v1",
      "commands": ["GOTO"],
      "lines": ["10 GOTO 30", "20 PRINT 0", "30 PRINT 1", "RUN"],
      "expect": {
        "outputContains": ["1"],
        "outputNotContains": ["0\r\n"]
      }
    },
    {
      "id": "gosub-return",
      "profile": "public-observed-v1",
      "commands": ["GOSUB", "RETURN"],
      "lines": ["10 GOSUB 100", "20 PRINT 9", "30 END", "100 PRINT 3", "110 RETURN", "RUN"],
      "expect": {
        "outputContains": ["3", "9"]
      }
    },
    {
      "id": "if-then-jump",
      "profile": "public-observed-v1",
      "commands": ["IF"],
      "lines": ["10 LET A=1", "20 IF A=1 THEN 40", "30 PRINT 0", "40 PRINT 7", "RUN"],
      "expect": {
        "outputContains": ["7"],
        "outputNotContains": ["0\r\n"]
      }
    },
    {
      "id": "end-stops-program",
      "profile": "public-observed-v1",
      "commands": ["END"],
      "lines": ["10 PRINT 1", "20 END", "30 PRINT 2", "RUN"],
      "expect": {
        "outputContains": ["1"],
        "outputNotContains": ["2\r\n"]
      }
    },
    {
      "id": "stop-stops-program",
      "profile": "public-observed-v1",
      "commands": ["STOP"],
      "lines": ["10 PRINT 1", "20 STOP", "30 PRINT 2", "RUN"],
      "expect": {
        "outputContains": ["1"],
        "outputNotContains": ["2\r\n"]
      }
    },
    {
      "id": "cls-clears-display",
      "profile": "public-observed-v1",
      "commands": ["CLS"],
      "lines": ["PRINT \"ABC\"", "CLS", "PRINT \"X\""],
      "expect": {
        "outputContains": ["ABC", "X", "OK"]
      }
    },
    {
      "id": "rem-ignored",
      "profile": "public-observed-v1",
      "commands": ["REM"],
      "lines": ["10 REM THIS IS COMMENT", "20 PRINT 5", "RUN"],
      "expect": {
        "outputContains": ["5"]
      }
    },
    {
      "id": "for-next-loop",
      "profile": "public-observed-v1",
      "commands": ["FOR", "NEXT"],
      "lines": ["10 FOR I=1 TO 3", "20 PRINT I", "30 NEXT I", "RUN"],
      "expect": {
        "outputContains": ["1", "2", "3"]
      }
    },
    {
      "id": "dim-array-assignment",
      "profile": "public-observed-v1",
      "commands": ["DIM"],
      "lines": ["DIM A(2)", "A(1)=7", "PRINT A(1)"],
      "expect": {
        "outputContains": ["7"]
      }
    },
    {
      "id": "data-read-restore",
      "profile": "public-observed-v1",
      "commands": ["DATA", "READ", "RESTORE"],
      "lines": ["10 DATA 5,6", "20 READ A,B", "30 PRINT A,B", "40 RESTORE", "50 READ C", "60 PRINT C", "RUN"],
      "expect": {
        "outputContains": ["5       6", "5"]
      }
    },
    {
      "id": "peek-poke-roundtrip",
      "profile": "public-observed-v1",
      "commands": ["PEEK", "POKE"],
      "lines": ["POKE 100,42", "PRINT PEEK(100)"],
      "expect": {
        "outputContains": ["255"]
      }
    },
    {
      "id": "inp-out-roundtrip",
      "profile": "public-observed-v1",
      "commands": ["INP", "OUT"],
      "lines": ["OUT 16,99", "PRINT INP(16)"],
      "expect": {
        "outputContains": ["255"]
      }
    },
    {
      "id": "beep-calls-sleep",
      "profile": "public-observed-v1",
      "commands": ["BEEP"],
      "lines": ["BEEP 8,1,0", "PRINT 1"],
      "expect": {
        "outputContains": ["1"]
      }
    },
    {
      "id": "wait-calls-sleep",
      "profile": "public-observed-v1",
      "commands": ["WAIT"],
      "lines": ["WAIT 1", "PRINT 1"],
      "expect": {
        "outputContains": ["1"]
      }
    },
    {
      "id": "locate-moves-cursor",
      "profile": "public-observed-v1",
      "commands": ["LOCATE"],
      "lines": ["LOCATE 1,1,0", "PRINT 2"],
      "expect": {
        "outputContains": ["2"]
      }
    },
    {
      "id": "builtin-function-pack",
      "profile": "public-observed-v1",
      "commands": ["LET", "PRINT"],
      "lines": [
        "LET A=ABS(-2)+INT(3.9)+SGN(-1)+VAL(\"12\")",
        "PRINT A",
        "PRINT LEFT$(\"ABCDE\",2);MID$(\"ABCDE\",2,2);RIGHT$(\"ABCDE\",1)",
        "PRINT CHR$(65);HEX$(255)"
      ],
      "expect": {
        "outputContains": ["16", "ABBCE", "AFF"]
      }
    },
    {
      "id": "auto-and-list",
      "profile": "public-observed-v1",
      "commands": ["AUTO", "LIST"],
      "lines": ["AUTO 100,10", "PRINT 1", "PRINT 2", ".", "LIST"],
      "expect": {
        "outputContains": ["100 PRINT 1", "110 PRINT 2"]
      }
    },
    {
      "id": "repeat-while-loop",
      "profile": "public-observed-v1",
      "commands": ["REPEAT", "UNTIL", "WHILE", "WEND"],
      "lines": [
        "10 LET A=0",
        "20 REPEAT",
        "30 LET A=A+1",
        "40 UNTIL A=3",
        "50 LET B=0",
        "60 WHILE B<2",
        "70 PRINT B",
        "80 LET B=B+1",
        "90 WEND",
        "100 PRINT A",
        "RUN"
      ],
      "expect": {
        "outputContains": ["0", "1", "3"]
      }
    },
    {
      "id": "binary-and-files",
      "profile": "public-observed-v1",
      "commands": ["BSAVE", "BLOAD", "FILES"],
      "lines": ["BSAVE \"E:BIN.DAT\",100,102", "BLOAD \"E:BIN.DAT\",100", "FILES"],
      "expect": {
        "outputContains": ["E:BIN.DAT"]
      }
    },
    {
      "id": "machine-dependent-pack",
      "profile": "public-observed-v1",
      "commands": ["PASS", "PIOSET", "PIOPUT", "SPOUT", "SPINP", "HDCOPY", "PAINT", "CIRCLE"],
      "lines": [
        "PASS \"SECURE\"",
        "PIOSET 1",
        "PIOPUT 2",
        "SPOUT 3",
        "SPINP A",
        "PRINT A",
        "PAINT (1,2),6",
        "CIRCLE (10,10),3,1,6",
        "HDCOPY"
      ],
      "expect": {
        "outputContains": ["255"],
        "variables": {"PASS$": "SECURE", "A": 255}
      }
    },
    {
      "id": "lninput-reads-raw-line",
      "profile": "public-observed-v1",
      "commands": ["LNINPUT", "PRINT"],
      "lines": ["10 LNINPUT A$", "20 PRINT A$", "RUN", "HELLO,THERE"],
      "expect": {
        "outputContains": ["HELLO,THERE"]
      }
    }
  ]
}
