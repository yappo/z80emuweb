# PC-G815 BASIC 観測ポリシー（ROM非使用）

この文書は、プロプライエタリROMを同梱・実行せずに、本リポジトリで「公開観測反例ゼロ」互換を宣言するための基準を定義します。

## 固定制約

- 目標: PC-G815 BASIC の厳密互換
- ROM方針: プロプライエタリROMバイナリは取得・配布・CI実行しない
- 実装方針: クリーンルーム実装のみ。既存エミュレータは挙動参照に限定し、コードは流用しない

## 根拠の重み付け

- `5`: 実機再現ログ（入力列 + 出力トレースが再現可能）
- `4`: アドレス/制御フロー根拠付きの解析資料
- `3`: 独立した2系統以上のエミュレータで一致する挙動
- `1`: 単発報告や断片情報

## LOCKED判定ルール

候補挙動を `LOCKED` に昇格する条件:

1. 最上位候補の加重スコアが `>= 7`
2. 最上位と次点のスコア差が `>= 2`

どちらかを満たさない場合は `TBD` のままとし、完了判定対象から除外します。

## 矛盾時の裁定

根拠同士が矛盾する場合は、上記スコアモデルの重み付き多数決で裁定します。

## 反例運用

- 反例は GitHub Issue の `counterexample` ラベルで管理する
- 完了判定ウィンドウの条件:
  - `main` で30日連続運用
  - 新規 `counterexample` issue が0件
  - 未解決 `counterexample` issue が0件

## 互換宣言ゲート

ROM非使用の厳密互換を宣言できる条件:

1. 観測コーパス合格率がCIで100%
2. `LOCKED` コマンド集合に未実装がない
3. 反例運用ゲートを30日連続で満たす
