<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PC-G815 Compatible Z80 Emulator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet" />
  </head>
  <body>
    <div class="app-shell">
      <header class="hero">
        <h1>PC-G815 Compatible Z80 Emulator</h1>
        <p>T-state stepped core, matrix keyboard mapping, and Canvas2D LCD renderer.</p>
        <p><a href="https://github.com/yappo/z80emuweb" target="_blank">https://github.com/yappo/z80emuweb</a></p>
      </header>

      <main class="panel-grid">
        <section class="device-panel">
          <div class="device-body">
            <div class="device-top">
              <span class="brand">SHARP STYLE</span>
              <span id="boot-status" class="boot-status" role="status" aria-live="polite">BOOTING</span>
              <span id="speed-indicator">0.00x</span>
            </div>
            <div class="lcd-bezel">
              <div class="lcd-screen">
                <canvas id="lcd" width="480" height="128" aria-label="PC-G815 LCD"></canvas>
              </div>
            </div>
            <div class="controls" role="group" aria-label="Emulator controls">
              <button id="run-toggle" type="button">Stop</button>
              <button id="step" type="button">Step</button>
              <button id="reset" type="button">Reset</button>
              <button id="kana-toggle" type="button" aria-pressed="false">かな OFF</button>
              <button id="font-debug-toggle" type="button" aria-expanded="false" aria-controls="font-debug-panel">
                Fonts
              </button>
            </div>
          </div>
        </section>

        <section class="status-panel">
          <section class="basic-editor-panel" aria-label="BASIC editor">
            <div class="basic-editor-head">
              <h2>BASIC Editor</h2>
              <span id="basic-run-status" class="basic-run-status" role="status" aria-live="polite">Idle</span>
            </div>
            <p class="basic-editor-hint">
              Editor focus: keyboard input types into this editor. Outside editor focus: keys control the emulator.
              RUN executes: NEW -> program lines -> RUN.
            </p>
            <p class="basic-editor-ref">
              Language reference:
              <a
                href="https://github.com/yappo/z80emuweb/blob/main/docs/basic-language-spec.md"
                target="_blank"
                rel="noopener noreferrer"
                >basic-language-spec.md</a
              >
            </p>
            <div class="basic-editor-controls" role="group" aria-label="BASIC editor controls">
              <button id="basic-run" type="button">RUN Program</button>
              <button id="basic-stop" type="button">STOP CPU</button>
              <button id="basic-new" type="button">NEW</button>
              <button id="basic-load-sample" type="button">Load Sample</button>
              <button id="basic-load-game" type="button">Sample Game</button>
            </div>
            <div class="basic-editor-body">
              <pre id="basic-editor-lines" class="basic-editor-lines" aria-hidden="true">1</pre>
              <textarea
                id="basic-editor"
                class="basic-editor"
                spellcheck="false"
                autocapitalize="off"
                autocomplete="off"
                aria-label="BASIC source editor"
              >10 A = 1
20 PRINT A
30 A = A + 1
40 WAIT 64
50 IF A > 10 THEN 70
60 GOTO 20
70 PRINT "owari"
80 END</textarea>
            </div>
          </section>

          <h2>Status</h2>
          <pre id="debug-view" class="debug-view" hidden></pre>
          <h3>Input Log</h3>
          <pre id="log-view" class="log-view"></pre>
          <h3>Key Matrix Map</h3>
          <div id="keymap-list" class="keymap-list"></div>
          <section id="font-debug-panel" class="font-debug-panel" hidden>
            <div class="font-debug-head">
              <h3>Font 5x7 Atlas</h3>
              <span id="font-debug-meta" class="font-debug-meta">0x41 "A"</span>
            </div>
            <p class="font-debug-hint">Click a cell to inspect glyph code (0x00-0xFF).</p>
            <canvas id="font-debug-canvas" aria-label="Font 5x7 glyph atlas"></canvas>
            <h4 class="font-kana-title">A0-DF Zoom</h4>
            <canvas id="font-kana-canvas" aria-label="Kana glyph zoom"></canvas>
          </section>
        </section>
      </main>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
